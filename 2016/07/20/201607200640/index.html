<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    
    <title>深入浅出HTTP协议（上） | 木南的個人網站 - MuNan&#39;s Personal Website | 人成各 今非昨 — 唐琬</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="HTTP,Node,爬虫">
    <link rel="shortcut icon" href="/img/5cb23cd0-2f82-44dc-9671-0bbe928e324e.ico">
    <link rel="stylesheet" href="/css/jquery.fancybox.min.css" />
    <link rel="stylesheet" href="/css/style.css?v=undefined">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":"P6YMSmGYRiXAnXDJJseTQdjd-gzGzoHsz","appkey":"dQIRsCSKFyCU9GupulzVFNUO","notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":null,"repo":null,"oauth":{"client_id":null,"client_secret":null},"perPage":10}'),
            d: JSON.parse('{"app_id":null}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
<meta name="generator" content="Hexo 4.2.0"></head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/b940cf6d-92e4-4ecf-bc32-590cbba0f93f.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/6954c1c6-3b8b-4960-b87e-c0c834c15c8a.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">木南</h5>
          <a href="mailto:c08cf6b8@outlook.com" title="c08cf6b8@outlook.com" class="mail">
            
              <span>c</span>
            
              <span>0</span>
            
              <span>8</span>
            
              <span>c</span>
            
              <span>f</span>
            
              <span>6</span>
            
              <span>b</span>
            
              <span>8</span>
            
              <span>@</span>
            
              <span>o</span>
            
              <span>u</span>
            
              <span>t</span>
            
              <span>l</span>
            
              <span>o</span>
            
              <span>o</span>
            
              <span>k</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/munanum" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主頁
              </a>
            </li>
        
            <li class="">
              <a href="/categories/%E9%9A%A8%E7%AD%86"  >
                <i class="icon icon-lg icon-th-list"></i>
                分類
              </a>
            </li>
        
            <li class="">
              <a href="/tags/%E9%9A%A8%E7%AD%86"  >
                <i class="icon icon-lg icon-tags"></i>
                標籤
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                歸檔
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>深入浅出HTTP协议（上）</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/a057c731-d78c-499a-8233-8309e92a3e4c.png" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">深入浅出HTTP协议（上）</h1>
        <h5 class="subtitle">
            
                <time datetime="2016-07-19T22:40:35.000Z" itemprop="datePublished" class="page-time">
  2016-07-20
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Node/">Node</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Node/%E7%88%AC%E8%99%AB/">爬虫</a></li></ul></li></ul></li></ul>

            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-201607200640"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">深入浅出HTTP协议（上）</h1>
        <div class="post-meta">
            <time class="post-time" title="2016-07-20 06:40:35" datetime="2016-07-19T22:40:35.000Z"  itemprop="datePublished">2016-07-20</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Node/">Node</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Node/%E7%88%AC%E8%99%AB/">爬虫</a></li></ul></li></ul></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>无论大家是前端程序员还是后端程序员，相信大家对<strong>HTTP</strong>这个词一定不陌生，在程序开发中它无处不在。所以，深入了解 HTTP 协议将会提高自己的编程质量以及提高前后端对接的效率。</p>
<h2 id="HTTP-工作原理"><a href="#HTTP-工作原理" class="headerlink" title="HTTP 工作原理"></a>HTTP 工作原理</h2><h3 id="HTTP-协议简介"><a href="#HTTP-协议简介" class="headerlink" title="HTTP 协议简介"></a>HTTP 协议简介</h3><p>HTTP 协议是<strong>Hyper Text Transfer Protocol（超文本传输协议）</strong>的缩写，是用于从万维网服务器传输超文本（例如 HTML 文件、图片文件、视频文件等）到本地浏览器的传输协议（<strong>应用层协议</strong>），也是互联网上应用最为广泛的一种网络协议。</p>
<h3 id="HTTP-架构设计"><a href="#HTTP-架构设计" class="headerlink" title="HTTP 架构设计"></a>HTTP 架构设计</h3><p>HTTP 是基于<strong>TCP/IP</strong>通信协议来传递数据，工作于客户端-服务端架构上。浏览器作为 HTTP 客户端通过<strong>URL</strong>向 HTTP 服务端发送请求，服务器收到请求后，向客户端发送响应信息。浏览器通过与服务器建立 TCP 连接，之后发送 HTTP 请求与接收 HTTP 响应都是通过访问 Socket 接口调用 TCP 协议实现。</p>
<figure class="image-box">
                <a rel=深入浅出HTTP协议（上） href="201811235001.jpg" title="" data-fancybox="images"><img src="201811235001.jpg" alt="" title="" class=""></a>
                <p></p>
            </figure>

<p>（图片来自网络）</p>
<blockquote>
<p>注意：在这种架构设计下，如果客户端没有向服务器发起请求，服务器无法主动向客户端推送消息。</p>
</blockquote>
<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><p>HTTP 使用<strong>统一资源标识符（Uniform Resource Identifiers, URI）</strong>来传输数据和建立连接。一旦建立连接后，数据消息就通过类似 Internet 邮件所使用的格式[RFC5322]和多用途 Internet 邮件扩展（MIME）[RFC2045]来传送。<strong>URL（Uniform Resource Locator）</strong>是一种特殊类型的 URI，包含了用于查找某个资源的足够的信息。URL 中文叫<strong>统一资源定位符</strong>，是互联网上用来标识某一处资源的地址。</p>
<p>以<strong><a href="http://www.munan.wiki:8080/tags/index.html?pageID=5&amp;ID=25618&amp;page=1#title" target="_blank" rel="noopener">http://www.munan.wiki:8080/tags/index.html?pageID=5&amp;ID=25618&amp;page=1#title</a></strong>为例：</p>
<table>
<thead>
<tr>
<th align="center">content</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">http</td>
<td align="center">该部分为协议部分，这代表该 URL 使用的是 HTTP 协议。</td>
</tr>
<tr>
<td align="center"><a href="http://www.munan.wiki" target="_blank" rel="noopener">www.munan.wiki</a></td>
<td align="center">该部分为域名部分。一个 URL 中，也可以使用 IP 地址作为域名。</td>
</tr>
<tr>
<td align="center">8080</td>
<td align="center">该部分为端口部分，域名和端口之间使用“:”作为分隔符。默认不写为 80 端口。</td>
</tr>
<tr>
<td align="center">tags</td>
<td align="center">该部分为虚拟目录部分，从域名后的第一个“/”开始到最后一个“/”为止，是虚拟目录部分。</td>
</tr>
<tr>
<td align="center">index.html</td>
<td align="center">该部分为文件名部分，从域名后的最后一个“/”开始到“？”为止，是文件名部分。</td>
</tr>
<tr>
<td align="center">pageID=5&amp;ID=25618&amp;page=1</td>
<td align="center">该部分为参数部分。参数可以有多个，参数之间用“&amp;”作为分隔符。</td>
</tr>
<tr>
<td align="center">title</td>
<td align="center">该部分为锚部分，从“#”开始到最后，都是锚部分。</td>
</tr>
</tbody></table>
<h3 id="HTTP-请求过程"><a href="#HTTP-请求过程" class="headerlink" title="HTTP 请求过程"></a>HTTP 请求过程</h3><p>平日里访问一个网站只需要在浏览器搜索框里输入网址也就是 URL 就可以了，从用户输入 URL 到看到网站内容经历了以下几个步骤：</p>
<figure class="image-box">
                <a rel=深入浅出HTTP协议（上） href="856284184-5a6abb497fab2_articlex.jpg" title="" data-fancybox="images"><img src="856284184-5a6abb497fab2_articlex.jpg" alt="" title="" class=""></a>
                <p></p>
            </figure>

<p>（图片来自网络）</p>
<ol>
<li>域名解析：首先会搜索本地 DNS 缓存，如果没有就向 DNS 服务器发起域名解析，以获取该域名所对应的 IP 地址；</li>
<li>建立 TCP 连接：获取域名对应的 IP 后，跟据 IP 地址和端口号与服务器建立 TCP 连接（也就是 TCP 的 3 次握手连接）；</li>
<li>HTTP 请求：TCP 连接成功后，浏览器向服务器发起 HTTP 请求报文（报文内容包含请求行、请求头部、请求主体，该请求报文作为 TCP 三次握手的第三个报文），用来向服务器请求文件；</li>
<li>服务器响应：服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器；</li>
<li>解析代码：浏览器得到响应后，首先解析状态行，查看状态码表明请求是否成功，如果成功读取响应数据并请求 html 文本中引用的图片文件、js 文件、css 文件等；</li>
<li>渲染执行页面：浏览器获取所有资源后，对页面进行渲染执行呈现给用户。</li>
</ol>
<h3 id="HTTP-状态码"><a href="#HTTP-状态码" class="headerlink" title="HTTP 状态码"></a>HTTP 状态码</h3><p>下面是常见的 HTTP 状态码（HTTP Status Code）：</p>
<table>
<thead>
<tr>
<th align="center">code</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>1xx</strong></td>
<td align="center"><strong>信息响应类，服务器收到请求，需要请求者继续执行操作。</strong></td>
</tr>
<tr>
<td align="center">100</td>
<td align="center">（Continue）客户端应继续其请求。</td>
</tr>
<tr>
<td align="center">101</td>
<td align="center">（Switching Protocols）服务器根据客户端的请求切换协议。只能切换到更高级的协议。</td>
</tr>
<tr>
<td align="center"><strong>2xx</strong></td>
<td align="center"><strong>处理成功响应类，操作被成功接收并处理。</strong></td>
</tr>
<tr>
<td align="center">200</td>
<td align="center">（OK）客户端请求成功，一般用于 GET 与 POST 请求。</td>
</tr>
<tr>
<td align="center">201</td>
<td align="center">（Created）成功请求并创建了新的资源。</td>
</tr>
<tr>
<td align="center">202</td>
<td align="center">（Accepted）接受并处理、但处理未完成。</td>
</tr>
<tr>
<td align="center">203</td>
<td align="center">（Non-Authoritative Information）请求成功，但返回的 meta 信息不在原始的服务器，而是一个副本。</td>
</tr>
<tr>
<td align="center">204</td>
<td align="center">（No Content）服务器成功处理，但未返回内容。</td>
</tr>
<tr>
<td align="center">205</td>
<td align="center">（Reset Content）服务器处理成功，用户终端应重置文档视图，可通过此返回码清除浏览器的表单域（重置内容）。</td>
</tr>
<tr>
<td align="center">206</td>
<td align="center">（Partial Content）服务器成功处理了部分 GET 请求。</td>
</tr>
<tr>
<td align="center"><strong>3xx</strong></td>
<td align="center"><strong>重定向响应类，需要进一步的操作以完成请求。</strong></td>
</tr>
<tr>
<td align="center">300</td>
<td align="center">（Multiple Choices）请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端选择。</td>
</tr>
<tr>
<td align="center">301</td>
<td align="center">（Moved Permanently）请求的资源已被永久的移动到新 URI，返回信息会包括新的 URI，浏览器会自动定向到新 URI。今后任何新的请求都应使用新的 URI 代替。</td>
</tr>
<tr>
<td align="center">302</td>
<td align="center">（Found）与 301 类似，但资源只是临时被移动。客户端应继续使用原有 URI。</td>
</tr>
<tr>
<td align="center">303</td>
<td align="center">（See Other）与 301 类似，使用 GET 和 POST 请求查看，建议客户访问其他 URL 或访问方式。</td>
</tr>
<tr>
<td align="center">304</td>
<td align="center">（Not Modified）所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源。</td>
</tr>
<tr>
<td align="center">305</td>
<td align="center">（Use Proxy）所请求的资源必须通过代理访问。</td>
</tr>
<tr>
<td align="center">306</td>
<td align="center">（Unused）前一版本 HTTP 中使用的代码，现行版本中不再使用，已经被废弃的 HTTP 状态码。</td>
</tr>
<tr>
<td align="center">307</td>
<td align="center">（Temporary Redirect）临时重定向，与 302 类似，使用 GET 请求重定向。</td>
</tr>
<tr>
<td align="center"><strong>4xx</strong></td>
<td align="center"><strong>客户端错误类，客户请求包含语法错误或者是不能正确执行。</strong></td>
</tr>
<tr>
<td align="center">400</td>
<td align="center">（Bad Request）客户端请求有语法错误，不能被服务器所理解。</td>
</tr>
<tr>
<td align="center">401</td>
<td align="center">（Unauthorized）请求未经授权，这个状态代码必须和 WWW-Authenticate 报头域一起使用。</td>
</tr>
<tr>
<td align="center">402</td>
<td align="center">（Payment Required）保留，将来使用。</td>
</tr>
<tr>
<td align="center">403</td>
<td align="center">（Forbidden）服务器理解请求客户端的请求，但是拒绝提供服务。</td>
</tr>
<tr>
<td align="center">404</td>
<td align="center">（Not Found）服务器无法根据客户端的请求找到资源（网页）。</td>
</tr>
<tr>
<td align="center">405</td>
<td align="center">（Method Not Allowed）客户端请求中的方法被禁止。</td>
</tr>
<tr>
<td align="center">406</td>
<td align="center">（Not Acceptable）根据发送的 Accept，请求资源不可访问。</td>
</tr>
<tr>
<td align="center">407</td>
<td align="center">（Proxy Authentication Required）请求要求代理的身份认证，与 401 类似，但请求者应当使用代理服务器进行授权。</td>
</tr>
<tr>
<td align="center">408</td>
<td align="center">（Request Time-out）服务器等待客户端发送的请求时间过长，超时。</td>
</tr>
<tr>
<td align="center">409</td>
<td align="center">（Conflict）服务器完成客户端的 PUT 请求是可能返回此代码，服务器处理请求时发生了冲突。</td>
</tr>
<tr>
<td align="center">410</td>
<td align="center">（Gone）客户端请求的资源已经不存在。410 不同于 404，如果资源以前有现在被永久删除了可使用 410 代码。网站设计人员可通过 301 代码指定资源的新位置。</td>
</tr>
<tr>
<td align="center">411</td>
<td align="center">（Length Required）服务器无法处理客户端发送的不带 Content-Length 的请求信息。</td>
</tr>
<tr>
<td align="center">412（Precondition Failed）</td>
<td align="center">一个或多个请求头字段在当前请求中错误。</td>
</tr>
<tr>
<td align="center">413</td>
<td align="center">（Request Entity Too Large）请求的资源大于服务器允许的大小。由于请求的实体过大，服务器无法处理，因此拒绝请求。为防止客户端的连续请求，服务器可能会关闭连接。如果只是服务器暂时无法处理，则会包含一个 Retry-After 的响应信息。</td>
</tr>
<tr>
<td align="center">414</td>
<td align="center">（Request-URI Too Large）请求的 URI 过长（URI 通常为网址），服务器无法处理。</td>
</tr>
<tr>
<td align="center">415</td>
<td align="center">（Unsupported Media Type）服务器无法处理请求附带的媒体格式，请求资源不支持请求项目格式。</td>
</tr>
<tr>
<td align="center">416</td>
<td align="center">（Requested range not satisfiable）请求中包含 Range 请求头字段，在当前请求资源范围内没有 range 指示值，请求也不包含 If-Range 请求头字段。</td>
</tr>
<tr>
<td align="center">417</td>
<td align="center">（Expectation Failed）服务器不满足请求 Expect 头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满足请求长。</td>
</tr>
<tr>
<td align="center"><strong>5xx</strong></td>
<td align="center"><strong>服务端错误类，服务器在处理请求的过程中发生了错误。</strong></td>
</tr>
<tr>
<td align="center">500</td>
<td align="center">（Internal Server Error）服务器内部错误，无法完成请求。</td>
</tr>
<tr>
<td align="center">501</td>
<td align="center">（Not Implemented）服务器不支持请求的功能，无法完成请求。</td>
</tr>
<tr>
<td align="center">502</td>
<td align="center">（Bad Gateway）作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应。</td>
</tr>
<tr>
<td align="center">503</td>
<td align="center">（Server Unavailable）服务器当前不能处理客户端的请求，一段时间后可能恢复正常。由于超载或系统维护，服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的 Retry-After 头信息中。</td>
</tr>
<tr>
<td align="center">504</td>
<td align="center">（Gateway Time-out）充当网关或代理的服务器，未及时从远端服务器获取请求。</td>
</tr>
<tr>
<td align="center">505</td>
<td align="center">（HTTP Version not supported）服务器不支持请求的 HTTP 协议的版本，无法完成处理。</td>
</tr>
</tbody></table>
<h3 id="HTTP-请求报文"><a href="#HTTP-请求报文" class="headerlink" title="HTTP 请求报文"></a>HTTP 请求报文</h3><p>HTTP 请求报文包含请求行、请求头、空行、请求体。</p>
<figure class="image-box">
                <a rel=深入浅出HTTP协议（上） href="1735907523-5a6abdd41deb8_articlex.jpg" title="" data-fancybox="images"><img src="1735907523-5a6abdd41deb8_articlex.jpg" alt="" title="" class=""></a>
                <p></p>
            </figure>

<p>（图片来自网络）</p>
<p>以请求<strong><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></strong>为例（下面为截图）：</p>
<figure class="image-box">
                <a rel=深入浅出HTTP协议（上） href="8edftuiol10193242.png" title="" data-fancybox="images"><img src="8edftuiol10193242.png" alt="" title="" class=""></a>
                <p></p>
            </figure>

<h4 id="请求行"><a href="#请求行" class="headerlink" title="请求行"></a>请求行</h4><p>绿色标记部分为请求行，表示请求方式为<strong>GET</strong>请求，使用<strong>HTTP1.1</strong>协议。<strong>GET</strong>是 HTTP 的请求方式之一，HTTP1.1 协议中共定义了 8 种方法与服务器交互，有 GET、POST、HEAD、PUT、DELETE、OPTIONS、TRACE、CONNECT，比较常用的是 GET 和 POST 方法。</p>
<p>GET 请求方法后是 URL（这里是“/”）和请求协议版本 1.1，之间用<strong>空格符</strong>隔开。</p>
<h4 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h4><p>HTTP 的头域包括<strong>通用头</strong>、<strong>请求头</strong>、<strong>响应头</strong>和<strong>实体头</strong>。请求头是请求报文特有的，向服务器提交了一些额外的信息。</p>
<p>以下是常用字段所对应的作用：</p>
<table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Value</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Host</td>
<td align="center"><a href="http://www.github.com" target="_blank" rel="noopener">www.github.com</a></td>
<td align="center">客户端指定自己将访问的服务器域名（或者 IP 地址和端口号）。</td>
</tr>
<tr>
<td align="center">Connection</td>
<td align="center">keep-alive</td>
<td align="center">告诉服务器需要持久有效的连接状态（<strong>HTTP1.1</strong>默认会进行持久连接）。</td>
</tr>
<tr>
<td align="center">Pragma</td>
<td align="center">no-cache</td>
<td align="center">在 HTTP/1.1 协议中，Pragma:no-cache 的含义和 Cache-Control:no-cache 相同。</td>
</tr>
<tr>
<td align="center"><strong>Cache-control</strong></td>
<td align="center">no-cache</td>
<td align="center">浏览器不使用缓存，强制向服务器请求资源。</td>
</tr>
<tr>
<td align="center"><strong>If-Modified-Since</strong></td>
<td align="center">Mon, 10 Apr 2019 22:08:55 GMT</td>
<td align="center">请求的资源在指定日期以后，如果被更新就返回资源，否则返回“Not Modified”。</td>
</tr>
<tr>
<td align="center">Upgrade-Insecure-Requests</td>
<td align="center">1</td>
<td align="center">表示浏览器可以处理 HTTPS 协议，并能把 HTTP 请求自动升级成 HTTPS。</td>
</tr>
<tr>
<td align="center">Referer</td>
<td align="center"><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></td>
<td align="center">浏览器请求发出页面所在地址，<strong>防盗链</strong>作用。</td>
</tr>
<tr>
<td align="center">User-Agent</td>
<td align="center">Mozilla/5.0 (Windows NT 10.0; Win6…</td>
<td align="center">表示用哪种浏览器发出的请求。</td>
</tr>
<tr>
<td align="center">Accept</td>
<td align="center">text/html,application/xhtml+xml…</td>
<td align="center">告诉服务器客户端可接受 MIME 的类型。</td>
</tr>
<tr>
<td align="center">Accept-Encoding</td>
<td align="center">gzip, deflate, br</td>
<td align="center">表示客户端支持压缩内容编码，去掉后会支持任意编码。</td>
</tr>
<tr>
<td align="center">Accept-Lanague</td>
<td align="center">zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7</td>
<td align="center">告诉服务器客户端能够接受的语言，没有则代表任何语言。</td>
</tr>
<tr>
<td align="center">Cookies</td>
<td align="center">logged_in=no; _ga=GA1.2…</td>
<td align="center">用于保持会话状态，由服务器端设置，然后在后续请求中，供服务器读取使用。</td>
</tr>
</tbody></table>
<p>以下是详细介绍<strong>Cache-control</strong>不同取值所代表的含义：</p>
<table>
<thead>
<tr>
<th align="center">Value</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">private</td>
<td align="center">默认值。</td>
</tr>
<tr>
<td align="center">max-age=3600</td>
<td align="center">表示浏览器缓存相对于当前时刻 3600s 后过期，在这期间直接使用浏览器缓存。</td>
</tr>
<tr>
<td align="center">max-age=0</td>
<td align="center">表示每次请求都会访问服务器通过<strong>Last-Modified</strong>来判断文件是否被修改。如果被修改，返回状态码 200 并得到最新文件，否则返回状态码 304 并读取缓存文件。</td>
</tr>
<tr>
<td align="center">no-cache</td>
<td align="center">浏览器不使用缓存，强制向服务器请求资源。</td>
</tr>
<tr>
<td align="center">no-store</td>
<td align="center">浏览器不会缓存所有内容。</td>
</tr>
</tbody></table>
<h4 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h4><p>请求头后面的空行是必须的。即使请求体数据为空，也必须有空行。</p>
<h4 id="请求体"><a href="#请求体" class="headerlink" title="请求体"></a>请求体</h4><p>这里存放请求时需要传递的数据。</p>
<h4 id="GET-请求与-POST-请求的区别"><a href="#GET-请求与-POST-请求的区别" class="headerlink" title="GET 请求与 POST 请求的区别"></a>GET 请求与 POST 请求的区别</h4><ol>
<li>GET 请求提交的数据会附在 URL 之后（也就是把数据放置在请求头中）以<strong>?</strong>分割 URL，多个参数用<strong>&amp;</strong>连接。如果数据是英文字母或者数字，则原样发送；如果是空格，则转换为<strong>+</strong>；如果是中文或者其他字符，则直接把字符串用 BASE64 加密（如：%E4%BD%A0%E5%A5%BD，％XX 中的 XX 为该符号以 16 进制表示的 ASCII。）。POST 请求提交的数据会放置在请求体中。因此，GET 提交的数据会在地址栏中显示出来。</li>
<li><strong>HTTP 协议</strong>没有对传输的数据大小进行限制，<strong>HTTP 协议规范</strong>也没有对 URL 长度进行限制。但在实际开发中，特定浏览器和服务器对 URL 长度有限制。例如 IE 对 URL 长度的限制是 2083 字节，其他浏览器如 Netscape、FireFox 等，理论上没有长度限制，其限制取决于操作系统的支持。因此对于 GET 提交数据时，传输数据就会受到 URL 长度的限制。POST 请求由于不是通过 URL 传递数据，理论上数据不受限。但实际各种服务器会对 POST 提交的数据进行大小限制。</li>
<li>POST 请求的安全性要比 GET 请求的安全性高。</li>
</ol>
<h3 id="HTTP-响应报文"><a href="#HTTP-响应报文" class="headerlink" title="HTTP 响应报文"></a>HTTP 响应报文</h3><p>一般情况下，服务器接收并处理客户端发过来的请求后会返回一个 HTTP 的响应消息。HTTP 响应包含状态行、响应头、空行和响应体。</p>
<p>以请求<strong><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></strong>为例（下面为截图）：</p>
<figure class="image-box">
                <a rel=深入浅出HTTP协议（上） href="ptVFlvOHc1clZ3OCsyU.png" title="" data-fancybox="images"><img src="ptVFlvOHc1clZ3OCsyU.png" alt="" title="" class=""></a>
                <p></p>
            </figure>

<h4 id="状态行"><a href="#状态行" class="headerlink" title="状态行"></a>状态行</h4><p>状态行由 HTTP 协议版本号、状态码、状态消息三部分组成（注意区分请求行）。此例中 HTTP 协议版本为 1.1 版本，状态码为 200，状态消息为 OK。</p>
<h4 id="响应头"><a href="#响应头" class="headerlink" title="响应头"></a>响应头</h4><p>以下是常用字段所对应的作用：</p>
<table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Value</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Content-Encoding</td>
<td align="center">gzip</td>
<td align="center">文档的编码（Encode）方法。只有在解码之后才可以得到 Content-Type 头指定的内容类型。利用 gzip 压缩文档能够显著地减少 HTML 文档的下载时间。</td>
</tr>
<tr>
<td align="center">Content-Length</td>
<td align="center">数字</td>
<td align="center">表示内容长度。只有<strong>当浏览器使用持久 HTTP 连接时</strong>才需要这个数据。</td>
</tr>
<tr>
<td align="center">Content-Type</td>
<td align="center">text/plain 等</td>
<td align="center">表示文档属于什么 MIME 类型。</td>
</tr>
<tr>
<td align="center">Date</td>
<td align="center">Mon, 10 Jun 2019 14:40:40 GMT</td>
<td align="center">生成响应的日期和时间。</td>
</tr>
<tr>
<td align="center"><strong>Expires</strong></td>
<td align="center">时间点</td>
<td align="center">表示文档什么时候过期，从而不再使用该缓存。</td>
</tr>
<tr>
<td align="center"><strong>Last-Modified</strong></td>
<td align="center">时间点</td>
<td align="center">文档的最后改动时间。浏览器通过<strong>If-Modified-Since</strong>为请求头提供一个日期，该请求将被视为一个条件 GET，只有改动时间迟于指定时间的文档才会返回，否则返回一个 304（Not Modified）状态。</td>
</tr>
<tr>
<td align="center">Server</td>
<td align="center">GitHub.com</td>
<td align="center">服务器名字。</td>
</tr>
<tr>
<td align="center">Set-Cookie</td>
<td align="center">_gh_sess=dm1tSXdxRExvSkpOZ…</td>
<td align="center">设置和页面关联的 Cookie。</td>
</tr>
<tr>
<td align="center">Refresh</td>
<td align="center"></td>
<td align="center">表示浏览器多少时间之后刷新文档，以秒计。</td>
</tr>
<tr>
<td align="center">Location</td>
<td align="center">URL 地址</td>
<td align="center">表示浏览器应当到哪里去提取文档（状态代码为 302）。</td>
</tr>
</tbody></table>
<h4 id="空行-1"><a href="#空行-1" class="headerlink" title="空行"></a>空行</h4><p>响应头后面的空行是必须的。即使响应体数据为空，也必须有空行。</p>
<h4 id="响应体"><a href="#响应体" class="headerlink" title="响应体"></a>响应体</h4><p>服务器返回给客户端的数据信息。</p>
<h3 id="非持久连接与持久连接"><a href="#非持久连接与持久连接" class="headerlink" title="非持久连接与持久连接"></a>非持久连接与持久连接</h3><p>在 HTTP 早期版本中，每进行一次通信就要断开一次 TCP 连接，由于当时传输内容较小所以没有什么问题。然而现在不仅请求量较多而且每次请求数据较大（比如图片网站），所以通信一次就断开一次 TCP 连接的模式就不合适了。为了解决这个问题，<strong>HTTP1.1</strong>协议出现了持久连接（HTTP Persistent Connections， HTTP keep-alive， HTTP connection reuse）功能。持久连接的特点是，<strong>只要任意一方没有明确提出断开连接则保持 TCP 连接状态</strong>。在 HTTP1.1 协议中，所有连接默认是持久连接。</p>
<figure class="image-box">
                <a rel=深入浅出HTTP协议（上） href="persisitConnection.jpg" title="" data-fancybox="images"><img src="persisitConnection.jpg" alt="" title="" class=""></a>
                <p></p>
            </figure>

<p>（图片来自网络）</p>
<p>总之，对于这些请求、响应，如果每次都经过一个单独的 TCP 连接发送则称为非持久连接。反之，如果每次都经过相同的 TCP 连接进行发送，则称为持久连接。非持久连接在每次请求、响应之后都要断开连接，下次再建立新的 TCP 连接。</p>
<style>
  h4 {
    font-size: 14px !important;
  }
</style>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        

        
        轉載注明出處，原文地址：<a href="/2016/07/20/201607200640/" target="_blank" rel="external">https://munan.wiki/2016/07/20/201607200640/</a>
        
    </div>
    <footer>
        <a href="https://munan.wiki">
            <img src="/img/6954c1c6-3b8b-4960-b87e-c0c834c15c8a.png" alt="木南">
            木南
        </a>
    </footer>
</blockquote>

        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node/" rel="tag">Node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%88%AC%E8%99%AB/" rel="tag">爬虫</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://munan.wiki/2016/07/20/201607200640/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《深入浅出HTTP协议（上）》 — 木南的個人網站 - MuNan's Personal Website&url=https://munan.wiki/2016/07/20/201607200640/&via=https://munan.wiki" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://munan.wiki/2016/07/20/201607200640/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2016/08/02/201608020650/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">常见“同源策略”问题解决方案</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2016/07/06/201607060840/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">移动端适配（下）</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#HTTP-工作原理"><span class="post-toc-number">2.</span> <span class="post-toc-text">HTTP 工作原理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-协议简介"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">HTTP 协议简介</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-架构设计"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">HTTP 架构设计</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#URL"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">URL</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-请求过程"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">HTTP 请求过程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-状态码"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">HTTP 状态码</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-请求报文"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">HTTP 请求报文</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#请求行"><span class="post-toc-number">2.6.1.</span> <span class="post-toc-text">请求行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#请求头"><span class="post-toc-number">2.6.2.</span> <span class="post-toc-text">请求头</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#空行"><span class="post-toc-number">2.6.3.</span> <span class="post-toc-text">空行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#请求体"><span class="post-toc-number">2.6.4.</span> <span class="post-toc-text">请求体</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#GET-请求与-POST-请求的区别"><span class="post-toc-number">2.6.5.</span> <span class="post-toc-text">GET 请求与 POST 请求的区别</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-响应报文"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">HTTP 响应报文</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#状态行"><span class="post-toc-number">2.7.1.</span> <span class="post-toc-text">状态行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#响应头"><span class="post-toc-number">2.7.2.</span> <span class="post-toc-text">响应头</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#空行-1"><span class="post-toc-number">2.7.3.</span> <span class="post-toc-text">空行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#响应体"><span class="post-toc-number">2.7.4.</span> <span class="post-toc-text">响应体</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#非持久连接与持久连接"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">非持久连接与持久连接</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        請我喝可樂吧(●ˇ∀ˇ●)🥤
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/69c8aa0f-f453-4dfb-90fd-d902862a397e.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/69c8aa0f-f453-4dfb-90fd-d902862a397e.jpg" data-alipay="/img/1afbf165-2495-4b8a-ba6f-6dff9220bb46.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

    </main>
    <footer class="footer ">
    
    <div class="bottom">
        <p>
            <span>
                木南 &copy; 2016 - 2022
            </span>
        		
           	
            
            
            
            

            
                

            
        </p>
    </div>
</footer>

    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://munan.wiki/2016/07/20/201607200640/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《深入浅出HTTP协议（上）》 — 木南的個人網站 - MuNan's Personal Website&url=https://munan.wiki/2016/07/20/201607200640/&via=https://munan.wiki" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://munan.wiki/2016/07/20/201607200640/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKUlEQVR42u3ay67CMAxFUf7/p3unV0Kh+9gBqc7OCFUQsjqw/Mjrhdf1b70/f//Oaq1+tdpz85IhQ8ZjGfyPV3/Af8Wf8LPJkCHjHMbqcGTrz6ETHQKQbs4sQ4YMGfhzJ7ySxFGGDBky0u1q1WUniMuQIeNkRtogS5NC0rz7US0uQ4aMBzJ40Pz956/MN2TIkPEoxhWuNNXbG16Xp5IhQ8ZoBg9wJNUjh06L5+DyhwwZMg5g9McAfBiZFrcoWZQhQ8ZQRlpGkgQxTfs2tPxkyJAxmpH2skj4S69/8SK5lkTKkCFjEoOHTv5kV2gOdpMhQ8ZQRi1pI5jPu/EkL67FZciQMYjRaYelF7Y6RenNS5QhQ8YBjF0tLdLoTxNQtI8MGTIOY6TdOB5w+fghJcmQIWM2gxeiHElgtZS0GO9lyJAxghGUi7iUTV9KOni4Ce4yZMgYxyCN+zQRrBXDrW/KkCFjNIOXlzy87grBxTsjMmTIOIxRa6WlI8w0vN7ktjJkyBjHSC971YrM/qD05gwyZMg4kkEaat+7ohpTZciQcQyjfwmM/PHeNFGGDBmzGVe4aqVvOmAgY1TUBZQhQ8YIBl+dRn8aZPeWvjJkyJjB4MUqD517h6BoCCFDhowDGDzw8Seddlsc+mXIkCGjFGT5yCHFbwi4MmTIOIDRL3Fr1yw2B1wZMmQ8ilG7VFEbD/AX95V2mwwZMh7ISK9WoPAXlqD9VyZDhoyhjD87ZyLgn2rrUwAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=undefined"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=undefined"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>

<script type="text/javascript" src="/js/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=undefined"></script>
<script type="text/javascript" src="/js/blog.js?v=undefined"></script>

<!-- third-party -->






<script type="text/javascript" src="/js/plugins/local_search.js?v=undefined"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<!-- <script async src="/js/busuanzi.pure.mini.js"></script> -->




    
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="/js/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>




    <script>
    (function() {
        var OriginTitile = document.title, titleTime;
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.title = '(づ￣ 3￣)づ點我吧!';
                clearTimeout(titleTime);
            } else {
                document.title = '(。・∀・)ノ咦~歡迎你!';
                titleTime = setTimeout(function() {
                    document.title = OriginTitile;
                },2000);
            }
        });
    })();
</script>





    
</body>
</html>
