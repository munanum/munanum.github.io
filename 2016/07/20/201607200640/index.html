<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    
    <title>深入淺出 HTTP 協議（上） | 木南的個人網站 - MuNan&#39;s Personal Website | 人成各 今非昨 — 唐琬</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="HTTP,Node,爬蟲">
    <link rel="shortcut icon" href="/img/5cb23cd0-2f82-44dc-9671-0bbe928e324e.ico">
    <link rel="stylesheet" href="/css/jquery.fancybox.min.css" />
    <link rel="stylesheet" href="/css/style.css?v=undefined">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	true,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":"P6YMSmGYRiXAnXDJJseTQdjd-gzGzoHsz","appkey":"dQIRsCSKFyCU9GupulzVFNUO","notify":true,"verify":true,"placeholder":"Give me some sugers plz...","avatar":"wavatar"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":"munanum","repo":"issues","oauth":{"client_id":"247de68ddbbfa47690cd","client_secret":"25c21da09d3f068ab0689510079ff4ef72792ec5"},"perPage":10}'),
            d: JSON.parse('{"app_id":null}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
<meta name="generator" content="Hexo 4.2.0"></head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/b940cf6d-92e4-4ecf-bc32-590cbba0f93f.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/6954c1c6-3b8b-4960-b87e-c0c834c15c8a.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">木南</h5>
          <a href="mailto:c08cf6b8@outlook.com" title="c08cf6b8@outlook.com" class="mail">
            
              <span>c</span>
            
              <span>0</span>
            
              <span>8</span>
            
              <span>c</span>
            
              <span>f</span>
            
              <span>6</span>
            
              <span>b</span>
            
              <span>8</span>
            
              <span>@</span>
            
              <span>o</span>
            
              <span>u</span>
            
              <span>t</span>
            
              <span>l</span>
            
              <span>o</span>
            
              <span>o</span>
            
              <span>k</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/munanum" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主頁
              </a>
            </li>
        
            <li class="">
              <a href="/categories/%E9%9A%A8%E7%AD%86"  >
                <i class="icon icon-lg icon-th-list"></i>
                分類
              </a>
            </li>
        
            <li class="">
              <a href="/tags/%E9%9A%A8%E7%AD%86"  >
                <i class="icon icon-lg icon-tags"></i>
                標籤
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                歸檔
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>深入淺出 HTTP 協議（上）</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/a057c731-d78c-499a-8233-8309e92a3e4c.png" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">深入淺出 HTTP 協議（上）</h1>
        <h5 class="subtitle">
            
                <time datetime="2016-07-19T22:40:35.000Z" itemprop="datePublished" class="page-time">
  2016-07-20
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Node/">Node</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Node/%E7%88%AC%E8%9F%B2/">爬蟲</a></li></ul></li></ul></li></ul>

            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="Search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-201607200640"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">深入淺出 HTTP 協議（上）</h1>
        <div class="post-meta">
            <time class="post-time" title="2016-07-20 06:40:35" datetime="2016-07-19T22:40:35.000Z"  itemprop="datePublished">2016-07-20</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Node/">Node</a><ul class="article-category-list-child"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/%E5%89%8D%E7%AB%AF/Node/%E7%88%AC%E8%9F%B2/">爬蟲</a></li></ul></li></ul></li></ul>



            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>無論大家是前端程序員還是後端程序員，相信大家對 <strong>HTTP</strong> 這個詞一定不陌生，在程序開發中它無處不在。所以，深入了解 HTTP 協議將會提高自己的編程質量以及提高前後端對接的效率。</p>
<h2 id="HTTP-工作原理"><a href="#HTTP-工作原理" class="headerlink" title="HTTP 工作原理"></a>HTTP 工作原理</h2><h3 id="HTTP-協議簡介"><a href="#HTTP-協議簡介" class="headerlink" title="HTTP 協議簡介"></a>HTTP 協議簡介</h3><p>HTTP 協議是 <strong>Hyper Text Transfer Protocol（超文本傳輸協議）</strong>的縮寫，是用於從萬維網服務器傳輸超文本（例如 HTML 文件、圖片文件、視頻文件等）到本地瀏覽器的傳輸協議（<strong>應用層協議</strong>），也是互聯網上應用最為廣泛的一種網絡協議。</p>
<h3 id="HTTP-架構設計"><a href="#HTTP-架構設計" class="headerlink" title="HTTP 架構設計"></a>HTTP 架構設計</h3><p>HTTP 是基於 <strong>TCP/IP</strong> 通信協議來傳遞數據，工作於客戶端-服務端架構上。瀏覽器作為 HTTP 客戶端通過 <strong>URL</strong> 向 HTTP 服務端發送請求，服務器收到請求後，向客戶端發送響應信息。瀏覽器通過與服務器建立 TCP 連接，之後發送 HTTP 請求與接收 HTTP 響應都是通過訪問 Socket 接口調用 TCP 協議實現。</p>
<figure class="image-box">
                <a rel=深入淺出 HTTP 協議（上） href="201811235001.jpg" title="" data-fancybox="images"><img src="201811235001.jpg" alt="" title="" class=""></a>
                <p></p>
            </figure>

<p>（圖片來自網絡）</p>
<blockquote>
<p>註意：在這種架構設計下，如果客戶端沒有向服務器發起請求，服務器無法主動向客戶端推送消息。</p>
</blockquote>
<h3 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h3><p>HTTP 使用<strong>統一資源標識符（Uniform Resource Identifiers, URI）</strong>來傳輸數據和建立連接。一旦建立連接後，數據消息就通過類似 Internet 郵件所使用的格式[RFC5322]和多用途 Internet 郵件擴展（MIME）[RFC2045]來傳送。<strong>URL（Uniform Resource Locator）</strong>是一種特殊類型的 URI，包含了用於查找某個資源的足夠的信息。URL 中文叫<strong>統一資源定位符</strong>，是互聯網上用來標識某一處資源的地址。</p>
<p>以 <strong><a href="http://www.munan.wiki:8080/tags/index.html?pageID=5&amp;ID=25618&amp;page=1#title" target="_blank" rel="noopener">http://www.munan.wiki:8080/tags/index.html?pageID=5&amp;ID=25618&amp;page=1#title</a></strong> 為例：</p>
<table>
<thead>
<tr>
<th align="center">content</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">http</td>
<td align="center">該部分為協議部分，這代表該 URL 使用的是 HTTP 協議。</td>
</tr>
<tr>
<td align="center"><a href="http://www.munan.wiki" target="_blank" rel="noopener">www.munan.wiki</a></td>
<td align="center">該部分為域名部分。一個 URL 中，也可以使用 IP 地址作為域名。</td>
</tr>
<tr>
<td align="center">8080</td>
<td align="center">該部分為端口部分，域名和端口之間使用「:」作為分隔符。默認不寫為 80 端口。</td>
</tr>
<tr>
<td align="center">tags</td>
<td align="center">該部分為虛擬目錄部分，從域名後的第一個「/」開始到最後一個「/」為止，是虛擬目錄部分。</td>
</tr>
<tr>
<td align="center">index.html</td>
<td align="center">該部分為文件名部分，從域名後的最後一個「/」開始到「？」為止，是文件名部分。</td>
</tr>
<tr>
<td align="center">pageID=5&amp;ID=25618&amp;page=1</td>
<td align="center">該部分為參數部分。參數可以有多個，參數之間用「&amp;」作為分隔符。</td>
</tr>
<tr>
<td align="center">title</td>
<td align="center">該部分為錨部分，從「#」開始到最後，都是錨部分。</td>
</tr>
</tbody></table>
<h3 id="HTTP-請求過程"><a href="#HTTP-請求過程" class="headerlink" title="HTTP 請求過程"></a>HTTP 請求過程</h3><p>平日裏訪問一個網站只需要在瀏覽器搜索框裏輸入網址也就是 URL 就可以了，從用戶輸入 URL 到看到網站內容經歷了以下幾個步驟：</p>
<figure class="image-box">
                <a rel=深入淺出 HTTP 協議（上） href="856284184-5a6abb497fab2_articlex.jpg" title="" data-fancybox="images"><img src="856284184-5a6abb497fab2_articlex.jpg" alt="" title="" class=""></a>
                <p></p>
            </figure>

<p>（圖片來自網絡）</p>
<ol>
<li>域名解析：首先會搜索本地 DNS 緩存，如果沒有就向 DNS 服務器發起域名解析，以獲取該域名所對應的 IP 地址；</li>
<li>建立 TCP 連接：獲取域名對應的 IP 後，跟據 IP 地址和端口號與服務器建立 TCP 連接（也就是 TCP 的 3 次握手連接）；</li>
<li>HTTP 請求：TCP 連接成功後，瀏覽器向服務器發起 HTTP 請求報文（報文內容包含請求行、請求頭部、請求主體，該請求報文作為 TCP 三次握手的第三個報文），用來向服務器請求文件；</li>
<li>服務器響應：服務器對瀏覽器請求作出響應，並把對應的 html 文本發送給瀏覽器；</li>
<li>解析代碼：瀏覽器得到響應後，首先解析狀態行，查看狀態碼表明請求是否成功，如果成功讀取響應數據並請求 html 文本中引用的圖片文件、js 文件、css 文件等；</li>
<li>渲染執行頁面：瀏覽器獲取所有資源後，對頁面進行渲染執行呈現給用戶。</li>
</ol>
<h3 id="HTTP-狀態碼"><a href="#HTTP-狀態碼" class="headerlink" title="HTTP 狀態碼"></a>HTTP 狀態碼</h3><p>下面是常見的 HTTP 狀態碼（HTTP Status Code）：</p>
<table>
<thead>
<tr>
<th align="center">code</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>1xx</strong></td>
<td align="center"><strong>信息響應類，服務器收到請求，需要請求者繼續執行操作。</strong></td>
</tr>
<tr>
<td align="center">100</td>
<td align="center">（Continue）客戶端應繼續其請求。</td>
</tr>
<tr>
<td align="center">101</td>
<td align="center">（Switching Protocols）服務器根據客戶端的請求切換協議。只能切換到更高級的協議。</td>
</tr>
<tr>
<td align="center"><strong>2xx</strong></td>
<td align="center"><strong>處理成功響應類，操作被成功接收並處理。</strong></td>
</tr>
<tr>
<td align="center">200</td>
<td align="center">（OK）客戶端請求成功，一般用於 GET 與 POST 請求。</td>
</tr>
<tr>
<td align="center">201</td>
<td align="center">（Created）成功請求並創建了新的資源。</td>
</tr>
<tr>
<td align="center">202</td>
<td align="center">（Accepted）接受並處理、但處理未完成。</td>
</tr>
<tr>
<td align="center">203</td>
<td align="center">（Non-Authoritative Information）請求成功，但返回的 meta 信息不在原始的服務器，而是一個副本。</td>
</tr>
<tr>
<td align="center">204</td>
<td align="center">（No Content）服務器成功處理，但未返回內容。</td>
</tr>
<tr>
<td align="center">205</td>
<td align="center">（Reset Content）服務器處理成功，用戶終端應重置文檔視圖，可通過此返回碼清除瀏覽器的表單域（重置內容）。</td>
</tr>
<tr>
<td align="center">206</td>
<td align="center">（Partial Content）服務器成功處理了部分 GET 請求。</td>
</tr>
<tr>
<td align="center"><strong>3xx</strong></td>
<td align="center"><strong>重定向響應類，需要進一步的操作以完成請求。</strong></td>
</tr>
<tr>
<td align="center">300</td>
<td align="center">（Multiple Choices）請求的資源可包括多個位置，相應可返回一個資源特征與地址的列表用於用戶終端選擇。</td>
</tr>
<tr>
<td align="center">301</td>
<td align="center">（Moved Permanently）請求的資源已被永久的移動到新 URI，返回信息會包括新的 URI，瀏覽器會自動定向到新 URI。今後任何新的請求都應使用新的 URI 代替。</td>
</tr>
<tr>
<td align="center">302</td>
<td align="center">（Found）與 301 類似，但資源只是臨時被移動。客戶端應繼續使用原有 URI。</td>
</tr>
<tr>
<td align="center">303</td>
<td align="center">（See Other）與 301 類似，使用 GET 和 POST 請求查看，建議客戶訪問其他 URL 或訪問方式。</td>
</tr>
<tr>
<td align="center">304</td>
<td align="center">（Not Modified）所請求的資源未修改，服務器返回此狀態碼時，不會返回任何資源。客戶端通常會緩存訪問過的資源，通過提供一個頭信息指出客戶端希望只返回在指定日期之後修改的資源。</td>
</tr>
<tr>
<td align="center">305</td>
<td align="center">（Use Proxy）所請求的資源必須通過代理訪問。</td>
</tr>
<tr>
<td align="center">306</td>
<td align="center">（Unused）前一版本 HTTP 中使用的代碼，現行版本中不再使用，已經被廢棄的 HTTP 狀態碼。</td>
</tr>
<tr>
<td align="center">307</td>
<td align="center">（Temporary Redirect）臨時重定向，與 302 類似，使用 GET 請求重定向。</td>
</tr>
<tr>
<td align="center"><strong>4xx</strong></td>
<td align="center"><strong>客戶端錯誤類，客戶請求包含語法錯誤或者是不能正確執行。</strong></td>
</tr>
<tr>
<td align="center">400</td>
<td align="center">（Bad Request）客戶端請求有語法錯誤，不能被服務器所理解。</td>
</tr>
<tr>
<td align="center">401</td>
<td align="center">（Unauthorized）請求未經授權，這個狀態代碼必須和 WWW-Authenticate 報頭域一起使用。</td>
</tr>
<tr>
<td align="center">402</td>
<td align="center">（Payment Required）保留，將來使用。</td>
</tr>
<tr>
<td align="center">403</td>
<td align="center">（Forbidden）服務器理解請求客戶端的請求，但是拒絕提供服務。</td>
</tr>
<tr>
<td align="center">404</td>
<td align="center">（Not Found）服務器無法根據客戶端的請求找到資源（網頁）。</td>
</tr>
<tr>
<td align="center">405</td>
<td align="center">（Method Not Allowed）客戶端請求中的方法被禁止。</td>
</tr>
<tr>
<td align="center">406</td>
<td align="center">（Not Acceptable）根據發送的 Accept，請求資源不可訪問。</td>
</tr>
<tr>
<td align="center">407</td>
<td align="center">（Proxy Authentication Required）請求要求代理的身份認證，與 401 類似，但請求者應當使用代理服務器進行授權。</td>
</tr>
<tr>
<td align="center">408</td>
<td align="center">（Request Time-out）服務器等待客戶端發送的請求時間過長，超時。</td>
</tr>
<tr>
<td align="center">409</td>
<td align="center">（Conflict）服務器完成客戶端的 PUT 請求是可能返回此代碼，服務器處理請求時發生了沖突。</td>
</tr>
<tr>
<td align="center">410</td>
<td align="center">（Gone）客戶端請求的資源已經不存在。410 不同於 404，如果資源以前有現在被永久刪除了可使用 410 代碼。網站設計人員可通過 301 代碼指定資源的新位置。</td>
</tr>
<tr>
<td align="center">411</td>
<td align="center">（Length Required）服務器無法處理客戶端發送的不帶 Content-Length 的請求信息。</td>
</tr>
<tr>
<td align="center">412（Precondition Failed）</td>
<td align="center">一個或多個請求頭字段在當前請求中錯誤。</td>
</tr>
<tr>
<td align="center">413</td>
<td align="center">（Request Entity Too Large）請求的資源大於服務器允許的大小。由於請求的實體過大，服務器無法處理，因此拒絕請求。為防止客戶端的連續請求，服務器可能會關閉連接。如果只是服務器暫時無法處理，則會包含一個 Retry-After 的響應信息。</td>
</tr>
<tr>
<td align="center">414</td>
<td align="center">（Request-URI Too Large）請求的 URI 過長（URI 通常為網址），服務器無法處理。</td>
</tr>
<tr>
<td align="center">415</td>
<td align="center">（Unsupported Media Type）服務器無法處理請求附帶的媒體格式，請求資源不支持請求項目格式。</td>
</tr>
<tr>
<td align="center">416</td>
<td align="center">（Requested range not satisfiable）請求中包含 Range 請求頭字段，在當前請求資源範圍內沒有 range 指示值，請求也不包含 If-Range 請求頭字段。</td>
</tr>
<tr>
<td align="center">417</td>
<td align="center">（Expectation Failed）服務器不滿足請求 Expect 頭字段指定的期望值，如果是代理服務器，可能是下一級服務器不能滿足請求長。</td>
</tr>
<tr>
<td align="center"><strong>5xx</strong></td>
<td align="center"><strong>服務端錯誤類，服務器在處理請求的過程中發生了錯誤。</strong></td>
</tr>
<tr>
<td align="center">500</td>
<td align="center">（Internal Server Error）服務器內部錯誤，無法完成請求。</td>
</tr>
<tr>
<td align="center">501</td>
<td align="center">（Not Implemented）服務器不支持請求的功能，無法完成請求。</td>
</tr>
<tr>
<td align="center">502</td>
<td align="center">（Bad Gateway）作為網關或者代理工作的服務器嘗試執行請求時，從遠程服務器接收到了一個無效的響應。</td>
</tr>
<tr>
<td align="center">503</td>
<td align="center">（Server Unavailable）服務器當前不能處理客戶端的請求，一段時間後可能恢復正常。由於超載或系統維護，服務器暫時的無法處理客戶端的請求。延時的長度可包含在服務器的 Retry-After 頭信息中。</td>
</tr>
<tr>
<td align="center">504</td>
<td align="center">（Gateway Time-out）充當網關或代理的服務器，未及時從遠端服務器獲取請求。</td>
</tr>
<tr>
<td align="center">505</td>
<td align="center">（HTTP Version not supported）服務器不支持請求的 HTTP 協議的版本，無法完成處理。</td>
</tr>
</tbody></table>
<h3 id="HTTP-請求報文"><a href="#HTTP-請求報文" class="headerlink" title="HTTP 請求報文"></a>HTTP 請求報文</h3><p>HTTP 請求報文包含請求行、請求頭、空行、請求體。</p>
<figure class="image-box">
                <a rel=深入淺出 HTTP 協議（上） href="1735907523-5a6abdd41deb8_articlex.jpg" title="" data-fancybox="images"><img src="1735907523-5a6abdd41deb8_articlex.jpg" alt="" title="" class=""></a>
                <p></p>
            </figure>

<p>（圖片來自網絡）</p>
<p>以請求 <strong><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></strong> 為例（下面為截圖）：</p>
<figure class="image-box">
                <a rel=深入淺出 HTTP 協議（上） href="8edftuiol10193242.png" title="" data-fancybox="images"><img src="8edftuiol10193242.png" alt="" title="" class=""></a>
                <p></p>
            </figure>

<h4 id="請求行"><a href="#請求行" class="headerlink" title="請求行"></a>請求行</h4><p>綠色標記部分為請求行，表示請求方式為 <strong>GET</strong> 請求，使用 <strong>HTTP1.1</strong> 協議。<strong>GET</strong> 是 HTTP 的請求方式之一，HTTP1.1 協議中共定義了 8 種方法與服務器交互，有 GET、POST、HEAD、PUT、DELETE、OPTIONS、TRACE、CONNECT，比較常用的是 GET 和 POST 方法。</p>
<p>GET 請求方法後是 URL（這裏是「/」）和請求協議版本 1.1，之間用<strong>空格符</strong>隔開。</p>
<h4 id="請求頭"><a href="#請求頭" class="headerlink" title="請求頭"></a>請求頭</h4><p>HTTP 的頭域包括<strong>通用頭</strong>、<strong>請求頭</strong>、<strong>響應頭</strong>和<strong>實體頭</strong>。請求頭是請求報文特有的，向服務器提交了一些額外的信息。</p>
<p>以下是常用字段所對應的作用：</p>
<table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Value</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Host</td>
<td align="center"><a href="http://www.github.com" target="_blank" rel="noopener">www.github.com</a></td>
<td align="center">客戶端指定自己將訪問的服務器域名（或者 IP 地址和端口號）。</td>
</tr>
<tr>
<td align="center">Connection</td>
<td align="center">keep-alive</td>
<td align="center">告訴服務器需要持久有效的連接狀態（<strong>HTTP1.1</strong> 默認會進行持久連接）。</td>
</tr>
<tr>
<td align="center">Pragma</td>
<td align="center">no-cache</td>
<td align="center">在 HTTP/1.1 協議中，Pragma:no-cache 的含義和 Cache-Control:no-cache 相同。</td>
</tr>
<tr>
<td align="center"><strong>Cache-control</strong></td>
<td align="center">no-cache</td>
<td align="center">瀏覽器不使用緩存，強製向服務器請求資源。</td>
</tr>
<tr>
<td align="center"><strong>If-Modified-Since</strong></td>
<td align="center">Mon, 10 Apr 2019 22:08:55 GMT</td>
<td align="center">請求的資源在指定日期以後，如果被更新就返回資源，否則返回「Not Modified」。</td>
</tr>
<tr>
<td align="center">Upgrade-Insecure-Requests</td>
<td align="center">1</td>
<td align="center">表示瀏覽器可以處理 HTTPS 協議，並能把 HTTP 請求自動升級成 HTTPS。</td>
</tr>
<tr>
<td align="center">Referer</td>
<td align="center"><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></td>
<td align="center">瀏覽器請求發出頁面所在地址，<strong>防盜鏈</strong>作用。</td>
</tr>
<tr>
<td align="center">User-Agent</td>
<td align="center">Mozilla/5.0 (Windows NT 10.0; Win6…</td>
<td align="center">表示用哪種瀏覽器發出的請求。</td>
</tr>
<tr>
<td align="center">Accept</td>
<td align="center">text/html,application/xhtml+xml…</td>
<td align="center">告訴服務器客戶端可接受 MIME 的類型。</td>
</tr>
<tr>
<td align="center">Accept-Encoding</td>
<td align="center">gzip, deflate, br</td>
<td align="center">表示客戶端支持壓縮內容編碼，去掉後會支持任意編碼。</td>
</tr>
<tr>
<td align="center">Accept-Lanague</td>
<td align="center">zh-CN,zh;q=0.9,en-US;q=0.8,en;q=0.7</td>
<td align="center">告訴服務器客戶端能夠接受的語言，沒有則代表任何語言。</td>
</tr>
<tr>
<td align="center">Cookies</td>
<td align="center">logged_in=no; _ga=GA1.2…</td>
<td align="center">用於保持會話狀態，由服務器端設置，然後在後續請求中，供服務器讀取使用。</td>
</tr>
</tbody></table>
<p>以下是詳細介紹 <strong>Cache-control</strong> 不同取值所代表的含義：</p>
<table>
<thead>
<tr>
<th align="center">Value</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">private</td>
<td align="center">默認值。</td>
</tr>
<tr>
<td align="center">max-age=3600</td>
<td align="center">表示瀏覽器緩存相對於當前時刻 3600s 後過期，在這期間直接使用瀏覽器緩存。</td>
</tr>
<tr>
<td align="center">max-age=0</td>
<td align="center">表示每次請求都會訪問服務器通過 <strong>Last-Modified</strong> 來判斷文件是否被修改。如果被修改，返回狀態碼 200 並得到最新文件，否則返回狀態碼 304 並讀取緩存文件。</td>
</tr>
<tr>
<td align="center">no-cache</td>
<td align="center">瀏覽器不使用緩存，強製向服務器請求資源。</td>
</tr>
<tr>
<td align="center">no-store</td>
<td align="center">瀏覽器不會緩存所有內容。</td>
</tr>
</tbody></table>
<h4 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h4><p>請求頭後面的空行是必須的。即使請求體數據為空，也必須有空行。</p>
<h4 id="請求體"><a href="#請求體" class="headerlink" title="請求體"></a>請求體</h4><p>這裏存放請求時需要傳遞的數據。</p>
<h4 id="GET-請求與-POST-請求的區別"><a href="#GET-請求與-POST-請求的區別" class="headerlink" title="GET 請求與 POST 請求的區別"></a>GET 請求與 POST 請求的區別</h4><ol>
<li>GET 請求提交的數據會附在 URL 之後（也就是把數據放置在請求頭中）以 <strong>?</strong> 分割 URL，多個參數用 <strong>&amp;</strong> 連接。如果數據是英文字母或者數字，則原樣發送；如果是空格，則轉換為 <strong>+</strong>；如果是中文或者其他字符，則直接把字符串用 BASE64 加密（如：%E4%BD%A0%E5%A5%BD，％XX 中的 XX 為該符號以 16 進製表示的 ASCII。）。POST 請求提交的數據會放置在請求體中。因此，GET 提交的數據會在地址欄中顯示出來。</li>
<li><strong>HTTP 協議</strong>沒有對傳輸的數據大小進行限製，<strong>HTTP 協議規範</strong>也沒有對 URL 長度進行限製。但在實際開發中，特定瀏覽器和服務器對 URL 長度有限製。例如 IE 對 URL 長度的限製是 2083 字節，其他瀏覽器如 Netscape、FireFox 等，理論上沒有長度限製，其限製取決於操作系統的支持。因此對於 GET 提交數據時，傳輸數據就會受到 URL 長度的限製。POST 請求由於不是通過 URL 傳遞數據，理論上數據不受限。但實際各種服務器會對 POST 提交的數據進行大小限製。</li>
<li>POST 請求的安全性要比 GET 請求的安全性高。</li>
</ol>
<h3 id="HTTP-響應報文"><a href="#HTTP-響應報文" class="headerlink" title="HTTP 響應報文"></a>HTTP 響應報文</h3><p>一般情況下，服務器接收並處理客戶端發過來的請求後會返回一個 HTTP 的響應消息。HTTP 響應包含狀態行、響應頭、空行和響應體。</p>
<p>以請求 <strong><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></strong> 為例（下面為截圖）：</p>
<figure class="image-box">
                <a rel=深入淺出 HTTP 協議（上） href="ptVFlvOHc1clZ3OCsyU.png" title="" data-fancybox="images"><img src="ptVFlvOHc1clZ3OCsyU.png" alt="" title="" class=""></a>
                <p></p>
            </figure>

<h4 id="狀態行"><a href="#狀態行" class="headerlink" title="狀態行"></a>狀態行</h4><p>狀態行由 HTTP 協議版本號、狀態碼、狀態消息三部分組成（註意區分請求行）。此例中 HTTP 協議版本為 1.1 版本，狀態碼為 200，狀態消息為 OK。</p>
<h4 id="響應頭"><a href="#響應頭" class="headerlink" title="響應頭"></a>響應頭</h4><p>以下是常用字段所對應的作用：</p>
<table>
<thead>
<tr>
<th align="center">Key</th>
<th align="center">Value</th>
<th align="center">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Content-Encoding</td>
<td align="center">gzip</td>
<td align="center">文檔的編碼（Encode）方法。只有在解碼之後才可以得到 Content-Type 頭指定的內容類型。利用 gzip 壓縮文檔能夠顯著地減少 HTML 文檔的下載時間。</td>
</tr>
<tr>
<td align="center">Content-Length</td>
<td align="center">數字</td>
<td align="center">表示內容長度。只有<strong>當瀏覽器使用持久 HTTP 連接時</strong>才需要這個數據。</td>
</tr>
<tr>
<td align="center">Content-Type</td>
<td align="center">text/plain 等</td>
<td align="center">表示文檔屬於什麽 MIME 類型。</td>
</tr>
<tr>
<td align="center">Date</td>
<td align="center">Mon, 10 Jun 2019 14:40:40 GMT</td>
<td align="center">生成響應的日期和時間。</td>
</tr>
<tr>
<td align="center"><strong>Expires</strong></td>
<td align="center">時間點</td>
<td align="center">表示文檔什麽時候過期，從而不再使用該緩存。</td>
</tr>
<tr>
<td align="center"><strong>Last-Modified</strong></td>
<td align="center">時間點</td>
<td align="center">文檔的最後改動時間。瀏覽器通過 <strong>If-Modified-Since</strong> 為請求頭提供一個日期，該請求將被視為一個條件 GET，只有改動時間遲於指定時間的文檔才會返回，否則返回一個 304（Not Modified）狀態。</td>
</tr>
<tr>
<td align="center">Server</td>
<td align="center">GitHub.com</td>
<td align="center">服務器名字。</td>
</tr>
<tr>
<td align="center">Set-Cookie</td>
<td align="center">_gh_sess=dm1tSXdxRExvSkpOZ…</td>
<td align="center">設置和頁面關聯的 Cookie。</td>
</tr>
<tr>
<td align="center">Refresh</td>
<td align="center"></td>
<td align="center">表示瀏覽器多少時間之後刷新文檔，以秒計。</td>
</tr>
<tr>
<td align="center">Location</td>
<td align="center">URL 地址</td>
<td align="center">表示瀏覽器應當到哪裏去提取文檔（狀態代碼為 302）。</td>
</tr>
</tbody></table>
<h4 id="空行-1"><a href="#空行-1" class="headerlink" title="空行"></a>空行</h4><p>響應頭後面的空行是必須的。即使響應體數據為空，也必須有空行。</p>
<h4 id="響應體"><a href="#響應體" class="headerlink" title="響應體"></a>響應體</h4><p>服務器返回給客戶端的數據信息。</p>
<h3 id="非持久連接與持久連接"><a href="#非持久連接與持久連接" class="headerlink" title="非持久連接與持久連接"></a>非持久連接與持久連接</h3><p>在 HTTP 早期版本中，每進行一次通信就要斷開一次 TCP 連接，由於當時傳輸內容較小所以沒有什麽問題。然而現在不僅請求量較多而且每次請求數據較大（比如圖片網站），所以通信一次就斷開一次 TCP 連接的模式就不合適了。為了解決這個問題，<strong>HTTP1.1</strong> 協議出現了持久連接（HTTP Persistent Connections， HTTP keep-alive， HTTP connection reuse）功能。持久連接的特點是，<strong>只要任意一方沒有明確提出斷開連接則保持 TCP 連接狀態</strong>。在 HTTP1.1 協議中，所有連接默認是持久連接。</p>
<figure class="image-box">
                <a rel=深入淺出 HTTP 協議（上） href="persisitConnection.jpg" title="" data-fancybox="images"><img src="persisitConnection.jpg" alt="" title="" class=""></a>
                <p></p>
            </figure>

<p>（圖片來自網絡）</p>
<p>總之，對於這些請求、響應，如果每次都經過一個單獨的 TCP 連接發送則稱為非持久連接。反之，如果每次都經過相同的 TCP 連接進行發送，則稱為持久連接。非持久連接在每次請求、響應之後都要斷開連接，下次再建立新的 TCP 連接。</p>
<style>
  h4 {
    font-size: 14px !important;
  }
</style>

        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        

        
        轉載注明出處，原文地址：<a href="/2016/07/20/201607200640/" target="_blank" rel="external">https://munan.wiki/2016/07/20/201607200640/</a>
        
    </div>
    <footer>
        <a href="https://munan.wiki">
            <img src="/img/6954c1c6-3b8b-4960-b87e-c0c834c15c8a.png" alt="木南">
            木南
        </a>
    </footer>
</blockquote>

        
            <div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">賞</a>
</div>

            
        
        <div class="post-footer">
            
	<ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/" rel="tag">HTTP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Node/" rel="tag">Node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%88%AC%E8%9F%B2/" rel="tag">爬蟲</a></li></ul>

            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://munan.wiki/2016/07/20/201607200640/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《深入淺出 HTTP 協議（上）》 — 木南的個人網站 - MuNan's Personal Website&url=https://munan.wiki/2016/07/20/201607200640/&via=https://munan.wiki" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://munan.wiki/2016/07/20/201607200640/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2016/08/02/201608020650/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">常見「同源策略」問題解決方案</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2016/07/06/201607060840/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">移動端適配（下）</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目錄</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#前言"><span class="post-toc-number">1.</span> <span class="post-toc-text">前言</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#HTTP-工作原理"><span class="post-toc-number">2.</span> <span class="post-toc-text">HTTP 工作原理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-協議簡介"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">HTTP 協議簡介</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-架構設計"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">HTTP 架構設計</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#URL"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">URL</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-請求過程"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">HTTP 請求過程</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-狀態碼"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">HTTP 狀態碼</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-請求報文"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">HTTP 請求報文</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#請求行"><span class="post-toc-number">2.6.1.</span> <span class="post-toc-text">請求行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#請求頭"><span class="post-toc-number">2.6.2.</span> <span class="post-toc-text">請求頭</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#空行"><span class="post-toc-number">2.6.3.</span> <span class="post-toc-text">空行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#請求體"><span class="post-toc-number">2.6.4.</span> <span class="post-toc-text">請求體</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#GET-請求與-POST-請求的區別"><span class="post-toc-number">2.6.5.</span> <span class="post-toc-text">GET 請求與 POST 請求的區別</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP-響應報文"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">HTTP 響應報文</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#狀態行"><span class="post-toc-number">2.7.1.</span> <span class="post-toc-text">狀態行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#響應頭"><span class="post-toc-number">2.7.2.</span> <span class="post-toc-text">響應頭</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#空行-1"><span class="post-toc-number">2.7.3.</span> <span class="post-toc-text">空行</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#響應體"><span class="post-toc-number">2.7.4.</span> <span class="post-toc-text">響應體</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#非持久連接與持久連接"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">非持久連接與持久連接</span></a></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>

    <div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        請我喝可樂吧 (●ˇ∀ˇ●)🥤
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/69c8aa0f-f453-4dfb-90fd-d902862a397e.jpg" alt="打賞二維碼">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/69c8aa0f-f453-4dfb-90fd-d902862a397e.jpg" data-alipay="/img/1afbf165-2495-4b8a-ba6f-6dff9220bb46.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付寶</span>
            </div>
        </label>
        
    </div>
</div>

    

</div>

    </main>
    <footer class="footer ">
    
    <div class="bottom">
        <p>
            <span>
                木南 &copy; 2016 - 2023
            </span>
        		
           	
            
            
            
            

            
                

            
        </p>
    </div>
</footer>

    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://munan.wiki/2016/07/20/201607200640/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《深入淺出 HTTP 協議（上）》 — 木南的個人網站 - MuNan's Personal Website&url=https://munan.wiki/2016/07/20/201607200640/&via=https://munan.wiki" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://munan.wiki/2016/07/20/201607200640/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>掃一掃，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKUlEQVR42u3ay67CMAxFUf7/p3unV0Kh+9gBqc7OCFUQsjqw/Mjrhdf1b70/f//Oaq1+tdpz85IhQ8ZjGfyPV3/Af8Wf8LPJkCHjHMbqcGTrz6ETHQKQbs4sQ4YMGfhzJ7ySxFGGDBky0u1q1WUniMuQIeNkRtogS5NC0rz7US0uQ4aMBzJ40Pz956/MN2TIkPEoxhWuNNXbG16Xp5IhQ8ZoBg9wJNUjh06L5+DyhwwZMg5g9McAfBiZFrcoWZQhQ8ZQRlpGkgQxTfs2tPxkyJAxmpH2skj4S69/8SK5lkTKkCFjEoOHTv5kV2gOdpMhQ8ZQRi1pI5jPu/EkL67FZciQMYjRaYelF7Y6RenNS5QhQ8YBjF0tLdLoTxNQtI8MGTIOY6TdOB5w+fghJcmQIWM2gxeiHElgtZS0GO9lyJAxghGUi7iUTV9KOni4Ce4yZMgYxyCN+zQRrBXDrW/KkCFjNIOXlzy87grBxTsjMmTIOIxRa6WlI8w0vN7ktjJkyBjHSC971YrM/qD05gwyZMg4kkEaat+7ohpTZciQcQyjfwmM/PHeNFGGDBmzGVe4aqVvOmAgY1TUBZQhQ8YIBl+dRn8aZPeWvjJkyJjB4MUqD517h6BoCCFDhowDGDzw8Seddlsc+mXIkCGjFGT5yCHFbwi4MmTIOIDRL3Fr1yw2B1wZMmQ8ilG7VFEbD/AX95V2mwwZMh7ISK9WoPAXlqD9VyZDhoyhjD87ZyLgn2rrUwAAAABJRU5ErkJggg==" alt="微信分享二維碼">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="/js/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=undefined"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=undefined"></script>
<script type="text/javascript" src="/js/jquery.fancybox.min.js"></script>

<script type="text/javascript" src="/js/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=undefined"></script>
<script type="text/javascript" src="/js/blog.js?v=undefined"></script>

<!-- third-party -->






<script type="text/javascript" src="/js/plugins/local_search.js?v=undefined"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<!-- <script async src="/js/busuanzi.pure.mini.js"></script> -->




    
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="/js/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>







    
</body>
</html>
